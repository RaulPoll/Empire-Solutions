if (self.CavalryLogger) { CavalryLogger.start_js(["YXPcJ"]); }

__d("ModalPhotoEditorTabName",[],(function a(b,c,d,e,f,g){f.exports={CROP:"crop",FILTERS:"filters",FRAMES:"frames",PRODUCT_TAG:"product_tag",STICKERS:"stickers",TAG:"tag",TEXT:"text"};}),null);
__d('EmoticonSpan.react',['cx','DraftEntity','EmojiImageURL','EmoticonsList','React','SupportedFBEmoji'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props.size,m=c('DraftEntity').get(this.props.entityKey).getData(),n=c('EmoticonsList').emoji[m.type],o=c('SupportedFBEmoji')[n]?c('EmojiImageURL').getFBEmojiURL(n,l):c('EmojiImageURL').getFBEmojiExtendedURL(n,l);return c('React').createElement('span',{className:"_3gl1 _5zz4",style:{backgroundImage:'url('+o+')',backgroundSize:l+'px '+l+'px',height:l+'px',width:l+'px'}},c('React').createElement('span',{className:"_ncl"},this.props.children));};function k(){i.apply(this,arguments);}k.defaultProps={size:16};f.exports=k;}),null);
__d('HashtagSpan.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement('span',babelHelpers['extends']({},this.props,{'data-offset-key':this.props.offsetKey,className:"_5zk7",spellCheck:false}),this.props.children);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('MentionSpan.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement('span',babelHelpers['extends']({},this.props,{'data-offset-key':this.props.offsetKey,className:"_247o",spellCheck:false}),this.props.children);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('WeakMentionSpan.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement('span',{'data-offset-key':this.props.offsetKey,className:"_whq",spellCheck:false},this.props.children);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('getHashtagMatches',['getHashtagRegex'],(function a(b,c,d,e,f,g){var h=c('getHashtagRegex')();function i(j,k){var l=j.getText(),m,n,o,p;while((m=h.exec(l))!==null){n=m.index+m[1].length;o=m[2];p=m[3];k(n,n+o.length+p.length);}}f.exports=i;}),null);
__d('getMentionsInputDecorator',['CompositeDraftDecorator','EmoticonSpan.react','HashtagSpan.react','MentionSpan.react','WeakMentionSpan.react','getEntityMatcher','getHashtagMatches'],(function a(b,c,d,e,f,g){var h;function i(){if(!h){var j=[{strategy:c('getEntityMatcher')(function(k){var l=k.getData();return k.getType()==='MENTION'&&l&&l.isWeak;}),component:c('WeakMentionSpan.react')},{strategy:c('getEntityMatcher')(function(k){return k.getType()==='MENTION';}),component:c('MentionSpan.react')},{strategy:c('getEntityMatcher')(function(k){return k.getType()==='EMOTICON';}),component:c('EmoticonSpan.react')},{strategy:c('getHashtagMatches'),component:c('HashtagSpan.react')}];h=new (c('CompositeDraftDecorator'))(j);}return h;}f.exports=i;}),null);
__d('RichTextEditorLink.react',['cx','Link.react','React','Tooltip'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.contentState,o=l.entityKey,p=l.offsetKey,q=n.getEntity(o).getData().url,r=q==='#'?{}:c('Tooltip').propsFor(q);return c('React').createElement(c('Link.react'),babelHelpers['extends']({},r,{'data-offset-key':p,'data-tooltip-alignh':'center','data-tooltip-content':q,href:q,target:'_blank',className:"_42a-"}),m);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('EmojiInputDecorator',['EmojiRenderer','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i='.',j='emoji';function k(l,m,n){this.$EmojiInputDecorator1=l;this.$EmojiInputDecorator2=m;this.$EmojiInputDecorator3=n;}k.prototype.getDecorations=function(l,m){var n=this.$EmojiInputDecorator2?this.$EmojiInputDecorator2.getDecorations(l,m).toArray():Array(l.getText().length).fill(null),o=0;c('EmojiRenderer').parse(l.getText()).forEach(function(p){var q=p.offset,r=q+p.length,s=true;for(var t=q;t<r;t++)if(n[t]!=null){s=false;break;}if(s){for(var u=q;u<r;u++)n[u]=j+i+o;o++;}});return h(n);};k.prototype.getComponentForKey=function(l){if(!this.$EmojiInputDecorator2||l.split(i)[0]===j)return this.$EmojiInputDecorator1;return this.$EmojiInputDecorator2.getComponentForKey(l);};k.prototype.getPropsForKey=function(l){if(!this.$EmojiInputDecorator2||l.split(i)[0]===j)return this.$EmojiInputDecorator3;return this.$EmojiInputDecorator2.getPropsForKey(l);};f.exports=k;}),null);
__d('EmojiSpan.react',['cx','DraftEntity','EmojiConfig','EmojiImageURL','FBEmojiUtils','React','SupportedFBEmoji','UnicodeUtils'],(function a(b,c,d,e,f,g,h){var i,j,k=c('EmojiImageURL').getFBEmojiURL;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=this.props,n=m.decoratedText,o=m.offsetKey,p=m.size,q=0,r=n.length,s=[];while(q<r){var t=c('UnicodeUtils').getUTF16Length(n,q);s.push(n.substr(q,t));q+=t;}var u=c('FBEmojiUtils').getSupportedKey(s);if(u&&Object.prototype.hasOwnProperty.call(c('SupportedFBEmoji'),u))return c('React').createElement('span',babelHelpers['extends']({},this.props,{className:"_3gl1 _5zz4",'data-offset-key':o,style:{backgroundImage:'url('+k(u,p)+')',backgroundSize:p+'px '+p+'px',height:p,width:p}}),c('React').createElement('span',{className:"_ncl"},n));return c('React').createElement('span',{'data-offset-key':o},n);};function l(){'use strict';i.apply(this,arguments);}f.exports=l;}),null);
__d('keyCommandBackspaceEmoji',['EditorState','EmojiRenderer','UnicodeUtils','moveSelectionBackward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){var h=function i(j){var k=c('removeTextWithStrategy')(j,function(m){var n=m.getSelection(),o=n.getAnchorOffset(),p=m.getCurrentContent().getBlockForKey(n.getAnchorKey()).getText(),q=p[o-1],r=null;if(q){var s=c('EmojiRenderer').parse(p);for(var t=0;t<s.length;t++)if(s[t].offset<o&&s[t].offset+s[t].length>=o){r=s[t].length;break;}if(!r)r=c('UnicodeUtils').getUTF16Length(q,0);}return c('moveSelectionBackward')(m,r||1);},'backward');if(k===j.getCurrentContent())return null;var l=j.getSelection();return c('EditorState').push(j,k.set('selectionBefore',l),l.isCollapsed()?'backspace-character':'remove-range');};f.exports=h;}),null);
__d('keyCommandDeleteEmoji',['EditorState','EmojiRenderer','UnicodeUtils','moveSelectionForward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){var h=function i(j){var k=c('removeTextWithStrategy')(j,function(m){var n=m.getSelection(),o=n.getAnchorOffset(),p=m.getCurrentContent().getBlockForKey(n.getAnchorKey()).getText(),q=p[o],r=null;if(q){var s=c('EmojiRenderer').parse(p);for(var t=0;t<s.length;t++)if(s[t].offset<=o&&s[t].offset+s[t].length>o){r=s[t].length;break;}if(!r)r=c('UnicodeUtils').getUTF16Length(q,0);}return c('moveSelectionForward')(m,r||1);},'forward');if(k===j.getCurrentContent())return null;var l=j.getSelection();return c('EditorState').push(j,k.set('selectionBefore',l),l.isCollapsed()?'delete-character':'remove-range');};f.exports=h;}),null);
__d('addEmojiInput',['EditorState','EmojiInputDecorator','EmojiSpan.react','React','keyCommandBackspaceEmoji','keyCommandDeleteEmoji'],(function a(b,c,d,e,f,g){'use strict';var h=function(i){return function(){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$_class1=function(r,s){var t=null;switch(r){case 'backspace':t=c('keyCommandBackspaceEmoji')(s);break;case 'delete':t=c('keyCommandDeleteEmoji')(s);break;}if(t){this.props.onChange(t);return 'handled';}return 'not-handled';}.bind(this),n;}l.prototype.blur=function(){'use strict';var m=this.refs.component;m&&typeof m.blur==='function'&&m.blur();};l.prototype.click=function(){'use strict';var m=this.refs.component;m&&typeof m.click==='function'&&m.click();};l.prototype.focus=function(){'use strict';var m=this.refs.component;m&&typeof m.focus==='function'&&m.focus();};l.prototype.render=function(){'use strict';var m=this.props.editorState,n=m.getDecorator();if(!(n instanceof c('EmojiInputDecorator')))m=c('EditorState').set(this.props.editorState,{decorator:new (c('EmojiInputDecorator'))(c('EmojiSpan.react'),n,{size:16})});return c('React').createElement(i,babelHelpers['extends']({},this.props,{editorState:m,handleKeyCommand:this.$_class1,ref:'component'}));};return l;}();}.bind(this);f.exports=h;}),null);
__d('addEmojiToEditorState',['DraftModifier','EditorState','EmojiFormat','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=arguments.length<=2||arguments[2]===undefined?c('emptyFunction'):arguments[2];if(typeof i!=='string')i=c('EmojiFormat').codeArrayToUnicode(i);var l=c('DraftModifier').replaceText(j.getCurrentContent(),j.getSelection(),i),m=c('EditorState').push(j,l,'insert-characters');if(m!==j)k(m);return m;}f.exports=h;}),null);
__d('AlbumUploaderContributor',['immutable'],(function a(b,c,d,e,f,g){f.exports=c('immutable').Record({id:null,title:null});}),null);
__d('SharedAlbumContributorsTokenizer.react',['fbt','AlbumUploaderContributor','React','SearchableEntry','XUITokenizer.react'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onAddEntryAttempt=function(r){var s=this.hasEntry(r);if(s)return;this.props.onContributorAdded(new (c('AlbumUploaderContributor'))({id:r.getUniqueID(),title:r.getTitle()}));}.bind(this),this.onRemoveEntryAttempt=function(r){var s=this.hasEntry(r);if(!s)return;this.props.onContributorRemoved(new (c('AlbumUploaderContributor'))({id:r.getUniqueID(),title:r.getTitle()}));}.bind(this),n;}l.prototype.render=function(){'use strict';var m={};m[this.props.ownerID]=true;var n=this.props.entries.map(function(o){return new (c('SearchableEntry'))({uniqueID:o.id,title:o.title});});return c('React').createElement(c('XUITokenizer.react'),{className:this.props.className,placeholder:this.props.placeholder,entries:n,searchSource:this.props.dataSource,onAddEntryAttempt:this.onAddEntryAttempt,onRemoveEntryAttempt:this.onRemoveEntryAttempt,excludedEntries:m,focusedOnInit:this.props.focusedOnInit,disabled:this.props.disabled});};l.prototype.hasEntry=function(m){'use strict';var n=m.getUniqueID(),o=this.props.entries;return o.some(function(p){return p.id===n;});};l.propTypes={className:k.string,dataSource:k.object.isRequired,disabled:k.bool,entries:k.array.isRequired,focusedOnInit:k.bool,onContributorAdded:k.func.isRequired,onContributorRemoved:k.func.isRequired,ownerID:k.oneOfType([k.number,k.string]).isRequired,placeholder:k.string};l.defaultProps={disabled:false,focusedOnInit:true,placeholder:h._("Enter friends' names")};f.exports=l;}),null);
__d('ProfileFeaturedAlbumsToggle.react',['cx','fbt','FBToggleSwitch.react','InlineBlock.react','XUIGrayText.react','XUIText.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m=this.props.checked?i._("ON"):i._("OFF");return c('React').createElement('div',{className:"_5-i4"},c('React').createElement('label',null,c('React').createElement(c('InlineBlock.react'),{alignv:'middle',height:20},this.$ProfileFeaturedAlbumsToggle1(i._("Feature on Profile")),c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:this.props.checked,className:"_2pis _2pii",disabled:this.props.disabled,onToggle:this.props.onToggle}),this.$ProfileFeaturedAlbumsToggle1(m))),c('React').createElement(c('XUIGrayText.react'),{display:'block',size:'small'},i._("Featured albums are public so anyone who visits your profile can see them.")));};l.prototype.$ProfileFeaturedAlbumsToggle1=function(m){if(this.props.disabled)return c('React').createElement(c('XUIGrayText.react'),{shade:'light'},m);return c('React').createElement(c('XUIText.react'),{className:this.props.checked?"_lsx":''},m);};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('ReactComposerMediaAttachmentActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({SET_MEDIA_CONFIG:null},'ReactComposerMediaAttachmentActionType');}),null);
__d('ReactComposerMediaAttachmentStore',['ReactComposerMediaAttachmentActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {createAlbumLink:null,taggingDataSource:null,videoUploader:null,videoProgressBar:null,videoProgressBarInstance:null};},function(l){switch(l.type){case c('ReactComposerMediaAttachmentActionType').SET_MEDIA_CONFIG:k&&k.$ReactComposerMediaAttachmentStore1(l);break;}});k=this;}j.prototype.getCreateAlbumLink=function(k){'use strict';return this.getComposerData(k).createAlbumLink;};j.prototype.getTaggingDataSource=function(k){'use strict';return this.getComposerData(k).taggingDataSource;};j.prototype.getVideoUploader=function(k){'use strict';return this.getComposerData(k).videoUploader;};j.prototype.getVideoProgressBarInstance=function(k){'use strict';return this.getComposerData(k).videoProgressBarInstance;};j.prototype.getVideoProgressBar=function(k){'use strict';return this.getComposerData(k).videoProgressBar;};j.prototype.$ReactComposerMediaAttachmentStore1=function(k){'use strict';var l=this.getComposerData(k.composerID);l.createAlbumLink=k.config.createAlbumLink;l.taggingDataSource=k.config.taggingDataSource;l.videoUploader=k.config.videoUploader;l.videoProgressBar=k.config.videoProgressBar;l.videoProgressBarInstance=k.config.videoProgressBarInstance;this.emitChange(k.composerID);};f.exports=new j();}),null);
__d('ReactComposerFaceboxTaggerTypeaheadPresenter',['cx','React','XUITypeaheadView.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('div',{className:"_3ntx"},c('React').createElement(c('XUITypeaheadView.react'),this.props));};function k(){i.apply(this,arguments);}var l={ViewRenderer:k,useLayer:true};f.exports=l;}),null);
__d('ReactComposerPhotoActionButton.react',['cx','React','Tooltip','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=c('joinClasses')(this.props.className,"_jfh");return c('React').createElement('button',babelHelpers['extends']({className:m,onClick:this.props.onClick,tabIndex:'0','aria-label':this.props.tooltip},c('Tooltip').propsFor(this.props.tooltip)),c('React').createElement('div',{className:this.props.iconClassName}));};function l(){i.apply(this,arguments);}l.propTypes={tooltip:k.node,className:k.string,onClick:k.func,iconClassName:k.string};f.exports=l;}),null);
__d('ReactComposerPhotoEditActionButton.react',['cx','fbt','React','ReactComposerPhotoActionButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Edit Photo");return c('React').createElement(c('ReactComposerPhotoActionButton.react'),{className:"_4_z4",onClick:this.props.onClick,tooltip:n,iconClassName:"_4_z5"});};function m(){j.apply(this,arguments);}m.propTypes={onClick:l.func};f.exports=m;}),null);
__d('ReactComposerPhotoFaceboxTagger.react',['cx','fbt','React','ReactComposerFaceboxTaggerTypeaheadPresenter','XUITypeahead.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={query:''},this.$ReactComposerPhotoFaceboxTagger1=function(s){this.props.onTagAdded(this.props.faceboxID,s.getUniqueID(),s.getTitle());}.bind(this),this.$ReactComposerPhotoFaceboxTagger2=function(event){this.setState({query:event.target.value});}.bind(this),o;}m.prototype.render=function(){var n=i._("Who is this?");return c('React').createElement(c('XUITypeahead.react'),{className:"_xgd",queryString:this.state.query,placeholder:n,onSelectAttempt:this.$ReactComposerPhotoFaceboxTagger1,onChange:this.$ReactComposerPhotoFaceboxTagger2,searchSource:this.props.dataSource,highlightOnSelect:true,showEntriesOnFocus:true,autoHighlight:true,selectOnTab:true,focusedOnInit:true,presenter:c('ReactComposerFaceboxTaggerTypeaheadPresenter')});};m.propTypes={faceboxID:l.string.isRequired,dataSource:l.object.isRequired,onTagAdded:l.func.isRequired};f.exports=m;}),null);
__d('ReactComposerQAndAActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({SET_QANDA_CONFIG:null},'ReactComposerQAndAActionType');}),null);
__d('ReactComposerQAndAStore',['ReactComposerQAndAActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {photoLimit:1,profilePicURI:null,profileURI:null,faceboxDataSource:null};},function(l){switch(l.type){case c('ReactComposerQAndAActionType').SET_QANDA_CONFIG:k&&k.$ReactComposerQAndAStore1(l);break;}});k=this;}j.prototype.getPhotoLimit=function(k){'use strict';return this.getComposerData(k).photoLimit;};j.prototype.getProfilePicSrc=function(k){'use strict';return this.getComposerData(k).profilePicSrc;};j.prototype.getProfileURI=function(k){'use strict';return this.getComposerData(k).profileURI;};j.prototype.getFaceboxDataSource=function(k){'use strict';return this.getComposerData(k).faceboxDataSource;};j.prototype.$ReactComposerQAndAStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','config']),m=l[0],n=l[1],o=this.getComposerData(m);o.photoLimit=n.photoLimit;o.profilePicSrc=n.profilePicSrc;o.profileURI=n.profileURI;o.faceboxDataSource=n.faceboxDataSource;this.emitChange(k.composerID);};f.exports=new j();}),null);
__d('ReactComposerPhotoFaceboxTaggerContainer.react',['React','ReactComponentWithPureRenderMixin','ReactComposerMediaAttachmentStore','ReactComposerPhotoFaceboxTagger.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerQAndAStore'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerPhotoFaceboxTaggerContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerMediaAttachmentStore'),c('ReactComposerQAndAStore'))],propTypes:{faceboxID:h.string.isRequired,onTagAdded:h.func.isRequired},statics:{calculateState:function j(k){var l=c('ReactComposerMediaAttachmentStore').getTaggingDataSource(k)||c('ReactComposerQAndAStore').getFaceboxDataSource(k);l&&l.bootstrap();return {dataSource:l};}},render:function j(){return c('React').createElement(c('ReactComposerPhotoFaceboxTagger.react'),{faceboxID:this.props.faceboxID,dataSource:this.state.dataSource,onTagAdded:this.props.onTagAdded});}});f.exports=i;}),null);
__d('ReactComposerPhotoProductTagActionButton.react',['cx','fbt','AsyncRequest','CommerceProductTaggerType','CommerceSelfServeNUXType','React','ReactComposerPhotoActionButton.react','ReactComposerTaggerActions','ReactComposerTaggerType','XCommerceSelfServeMerchantNUXSeenController','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$ReactComposerPhotoProductTagActionButton2=function(){var s=c('XCommerceSelfServeMerchantNUXSeenController').getURIBuilder().setInt('page_id',this.props.pageID).setEnum('nux_type',c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON).getURI();new (c('AsyncRequest'))(s).send();this.props.onHideNux();}.bind(this),o;}m.prototype.render=function(){var n=i._("Tag Products");return c('React').createElement('div',null,c('React').createElement(c('ReactComposerPhotoActionButton.react'),{ref:'fbReactComposerPhotoActionbutton',className:"_a69"+(this.props.hasTag?' '+"_a6b":''),tooltip:n,iconClassName:"_a6_",onClick:this.props.onClick}),this.$ReactComposerPhotoProductTagActionButton1());};m.prototype.$ReactComposerPhotoProductTagActionButton1=function(){if(!this.props.showNux)return null;c('ReactComposerTaggerActions').handleSetTaggerShowNUX(this.props.composerID,c('ReactComposerTaggerType').PRODUCT,false);var n=this.props.productTaggerType,o=n===c('CommerceProductTaggerType').SHOP_PAGE?i._("Tag products from your shop in this photo"):i._("Tag products in this photo");return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.fbReactComposerPhotoActionbutton;}.bind(this),onCloseButtonClick:this.$ReactComposerPhotoProductTagActionButton2,position:'right',shown:true,width:'auto'},o);};m.propTypes={composerID:l.string.isRequired,pageID:l.string.isRequired,productTaggerType:l.string.isRequired,hasTag:l.bool.isRequired,onClick:l.any,onHideNux:l.func.isRequired,showNux:l.bool.isRequired};f.exports=m;}),null);
__d('ReactComposerPhotoTagActionButton.react',['cx','fbt','React','ReactComposerPhotoActionButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Tag");return c('React').createElement(c('ReactComposerPhotoActionButton.react'),{className:"_cwf"+(this.props.hasTag?' '+"_cwh":''),tooltip:n,iconClassName:"_cwg",onClick:this.props.onClick});};function m(){j.apply(this,arguments);}m.propTypes={hasTag:l.bool.isRequired,onClick:l.any};f.exports=m;}),null);
__d('ReactComposerPhotoTaggedFaceboxSummary.react',['cx','fbt','ix','Image.react','LeftRight.react','React','TooltipLink.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerPhotoTaggedFaceboxSummary1=function(){this.props.onTagRemoved(this.props.faceboxID,this.props.taggedSubjectID);}.bind(this),p;}n.prototype.render=function(){var o=i._("Edit Name");return c('React').createElement(c('LeftRight.react'),{className:"_31bg"},c('React').createElement('div',{className:"_31bh"},this.props.taggedValue),c('React').createElement(c('TooltipLink.react'),{alignH:'center',position:'below',tooltip:o,onClick:this.$ReactComposerPhotoTaggedFaceboxSummary1},c('React').createElement(c('Image.react'),{src:j("76906")})));};n.propTypes={faceboxID:m.string.isRequired,onTagRemoved:m.func.isRequired,taggedSubjectID:m.string.isRequired,taggedValue:m.string.isRequired};f.exports=n;}),null);
__d('ReactComposerPhotoTagger.react',['cx','fbt','ActorURI','AsyncRequest','CommerceProductTaggerType','ContextualLayerAutoFlip','Image.react','ImageBlock.react','immutable','LayerHideOnBlur','LayerHideOnEscape','LayerTabIsolation','ModalPhotoEditorTabName','PhotoEditorTargetType','React','ReactComponentWithPureRenderMixin','ReactComposerContextMixin','ReactComposerPhotoActions','ReactComposerPhotoEditActionButton.react','ReactComposerPhotoFaceboxTaggerContainer.react','ReactComposerPhotoProductTagActionButton.react','ReactComposerPhotoStore','ReactComposerPhotoTagActionButton.react','ReactComposerPhotoTaggedFaceboxSummary.react','ReactLayeredComponentMixin_DEPRECATED','XStickerPhotoEditorController','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIContextualDialogFooter.react','XUIDialogCloseButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=268,l=32,m=c('React').createClass({displayName:'ReactComposerPhotoTagger',_photoEditorRequest:undefined,mixins:[c('ReactLayeredComponentMixin_DEPRECATED'),c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin')],propTypes:{canTagFromModal:j.bool,draggingPhotos:j.bool,enableFaceboxTagger:j.bool.isRequired,disablePhotoEditing:j.bool.isRequired,faceboxes:j.instanceOf(c('immutable').Map).isRequired,onEditClick:j.func,onHideProductTaggerNux:j.func.isRequired,onTagAdded:j.func.isRequired,onTagIntent:j.func,onTagRemoved:j.func.isRequired,originalID:j.string,photoID:j.string.isRequired,productTaggerType:j.string.isRequired,shown:j.bool.isRequired,showProductTaggerNux:j.bool.isRequired},getDefaultProps:function n(){return {shown:false};},componentWillReceiveProps:function n(o){if(!this.props.draggingPhotos&&o.draggingPhotos)c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,null);},render:function n(){var o=null,p=this.props.productTaggerType!==c('CommerceProductTaggerType').NONE;if(p){o=this._onProductTagClick;}else if(this.props.canTagFromModal)o=this._onTagClick;var q=null;if(p){q=c('React').createElement(c('ReactComposerPhotoProductTagActionButton.react'),{composerID:this.context.composerID,productTaggerType:this.props.productTaggerType,pageID:this.context.targetID,hasTag:c('ReactComposerPhotoStore').hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:o,onHideNux:this.props.onHideProductTaggerNux,showNux:this.props.showProductTaggerNux});}else if(this.props.enableFaceboxTagger)q=c('React').createElement(c('ReactComposerPhotoTagActionButton.react'),{hasTag:c('ReactComposerPhotoStore').hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:o});var r=this.props.disablePhotoEditing?null:c('React').createElement(c('ReactComposerPhotoEditActionButton.react'),{onClick:this._onEditClick});return c('React').createElement('div',{className:"_jfi"+(p?' '+"uiContextualLayerParent":''),onClick:this._onClick,role:'presentation',tabIndex:'-1'},q,r);},renderLayers:function n(){if(!this.props.shown||!this.props.enableFaceboxTagger)return null;return {dialog:this._getDialog()};},_getDialog:function n(){return c('React').createElement(c('XUIContextualDialog.react'),{ref:'dialog',shown:this.props.shown,onToggle:this._onDialogToggled,contextRef:function(){return this;}.bind(this),position:'below',alignment:'center',width:k,behaviors:{LayerHideOnBlur:c('LayerHideOnBlur'),LayerHideOnEscape:c('LayerHideOnEscape'),ContextualLayerAutoFlip:c('ContextualLayerAutoFlip'),LayerTabIsolation:c('LayerTabIsolation')}},c('React').createElement(c('XUIContextualDialogBody.react'),null,this._getDialogBody()),c('React').createElement(c('XUIContextualDialogFooter.react'),null,c('React').createElement(c('XUIDialogCloseButton.react'),{use:'confirm',label:'Close',onClick:this._onCloseButtonClicked})));},_getDialogBody:function n(){if(this.props.faceboxes.size===0)return i._("We could not find any faces to tag.");return this.props.faceboxes.valueSeq().map(function(o){var p=o.taggedSubjectID?c('React').createElement(c('ReactComposerPhotoTaggedFaceboxSummary.react'),{faceboxID:o.id,onTagRemoved:this.props.onTagRemoved,taggedSubjectID:o.taggedSubjectID,taggedValue:o.taggedValue}):c('React').createElement(c('ReactComposerPhotoFaceboxTaggerContainer.react'),{faceboxID:o.id,onTagAdded:this.props.onTagAdded});return c('React').createElement(c('ImageBlock.react'),{key:o.id,className:"_qv7"},c('React').createElement(c('Image.react'),{className:"_qv8",height:l,src:o.croppedURI,width:l}),p);}.bind(this));},_onCloseButtonClicked:function n(){c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,null);},_onDialogToggled:function n(o){if(!o)this._onCloseButtonClicked();},_onClick:function n(){this.props.onTagIntent&&this.props.onTagIntent();c('ReactComposerPhotoActions').setPhotoBeingTagged(this.context.composerID,this.props.photoID);},_onTagClick:function n(event){this._onEditClick(event,null,c('ModalPhotoEditorTabName').TAG);},_onProductTagClick:function n(event){this._onEditClick(event,null,c('ModalPhotoEditorTabName').PRODUCT_TAG);},_onEditClick:function n(event,o,p){event.stopPropagation();if(this._photoEditorRequest)return;c('ReactComposerPhotoActions').startPhotoEdit(this.context.composerID,this.props.photoID);var q=c('XStickerPhotoEditorController').getURIBuilder().setString('grid_id',this.context.composerID).setEnum('target_type',c('PhotoEditorTargetType').COMPOSER).setInt('latest_fbid',this.props.photoID).setInt('photo_fbid',this.props.originalID||this.props.photoID).setEnum('initial_tab',p).getURI();q=c('ActorURI').create(q,this.context.actorID);this._photoEditorRequest=new (c('AsyncRequest'))(q).setFinallyHandler(function(){this._photoEditorRequest=null;c('ReactComposerPhotoActions').finishLoadingPhotoEdit(this.context.composerID,this.props.photoID);}.bind(this));this._photoEditorRequest&&this._photoEditorRequest.send();this.props.onEditClick&&this.props.onEditClick();}});f.exports=m;}),null);
__d('ReactComposerPhotoThumbnail.react',['Image.react','React'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){if(j.bgURL){var k={backgroundImage:'url('+j.bgURL+')'};return c('React').createElement('div',{className:j.bgClassName,style:k});}else if(j.imgSrc)return c('React').createElement(c('Image.react'),{alt:j.alt,className:j.imgClassName,src:j.imgSrc,style:j.style,width:j.width,height:j.height});return null;};f.exports=h;}),null);
__d('ReactComposerPhoto.react',['cx','fbt','ix','CommerceProductTaggerType','Image.react','ImageBlock.react','immutable','LoadingIndicator.react','React','ReactComponentWithPureRenderMixin','ReactComposerContextMixin','ReactComposerMediaConfig','ReactComposerPhotoTagger.react','ReactComposerPhotoThumbnail.react','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerStore','ReactFragment','XUIAmbientNUX.react','XUICloseButton.react','XUIContextualDialog.react','XUIContextualDialogBody.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerPhoto',mixins:[c('ReactComposerContextMixin'),c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerStore'))],propTypes:{canTagFromModal:k.bool,disablePhotoEditing:k.bool,draggingPhotos:k.bool,enableFaceboxTagger:k.bool,faceboxes:k.instanceOf(c('immutable').Map).isRequired,fileURL:k.string,isLoadingPhotoEdit:k.bool,isSpherical:k.bool,label:k.string,onEditClick:k.func,onHideProductTaggerNux:k.func.isRequired,onRemoveButtonClicked:k.func.isRequired,onTagAdded:k.func.isRequired,onTaggingNUXClose:k.func,onTagIntent:k.func,onTagRemoved:k.func.isRequired,originalID:k.string,photoID:k.string.isRequired,productTaggerType:k.string,showStickersNUX:k.bool,showTaggingNUX:k.bool,thumbSrc:k.string.isRequired},getDefaultProps:function m(){return {enableFaceboxTagger:true,productTaggerType:c('CommerceProductTaggerType').NONE,disablePhotoEditing:false};},statics:{calculateState:function m(n,o){return {posting:c('ReactComposerStore').isPosting(n)};}},_renderImage:function m(){var n=this.context.gks.local_image_display?this.props.fileURL:null;return c('React').createElement(c('ReactComposerPhotoThumbnail.react'),{bgClassName:"_1a__",bgURL:n,height:c('ReactComposerMediaConfig').photo.thumbHeight,imgSrc:this.props.thumbSrc,width:c('ReactComposerMediaConfig').photo.thumbWidth,alt:this.props.label});},render:function m(){var n={width:c('ReactComposerMediaConfig').photo.thumbWidth,height:c('ReactComposerMediaConfig').photo.thumbHeight},o=this.props.isRecognizingFaceboxes||this.props.isLoadingPhotoEdit?c('React').createElement('div',{className:"_jff"},c('React').createElement(c('LoadingIndicator.react'),{className:"_jfg",size:'small',color:'white'})):null,p=this.props.showProductTaggerNux?"_jfc"+(this.props.isRecognizingFaceboxes?' '+"_jfd":'')+(' '+"_43p_"):"_jfc"+(this.props.isRecognizingFaceboxes?' '+"_jfd":''),q=void 0,r=void 0;if(!this.state.posting){q=c('React').createElement(c('XUICloseButton.react'),{className:"_jfe",onClick:this.props.onRemoveButtonClicked,size:'medium',shade:'light'});r=c('React').createElement(c('ReactComposerPhotoTagger.react'),{canTagFromModal:this.props.canTagFromModal,draggingPhotos:this.props.draggingPhotos,enableFaceboxTagger:this.props.enableFaceboxTagger,productTaggerType:this.props.productTaggerType,disablePhotoEditing:this.props.disablePhotoEditing,faceboxes:this.props.faceboxes,onEditClick:this.props.onEditClick,onHideProductTaggerNux:this.props.onHideProductTaggerNux,onTagIntent:this.props.onTagIntent,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,originalID:this.props.originalID,photoID:this.props.photoID,shown:this.props.showPhotoTagger,showProductTaggerNux:this.props.showProductTaggerNux});}return c('React').createElement('span',null,c('React').createElement('div',{ref:'root',className:p,style:n},this._renderImage(),q,o,r),this.renderLayers());},renderLayers:function m(){return c('ReactFragment').create({taggingNUX:this.props.enableFaceboxTagger?this._getTaggingNux():null,stickersNUX:this.props.disablePhotoEditing?null:this._getStickersNux()});},_getTaggingNux:function m(){return c('React').createElement(c('XUIContextualDialog.react'),{contextRef:function(){return this.refs.root;}.bind(this),position:'below',alignment:'left',shown:this.props.showTaggingNUX,width:300},c('React').createElement(c('XUIContextualDialogBody.react'),null,c('React').createElement(c('XUICloseButton.react'),{className:"rfloat",onClick:this.props.onTaggingNUXClose}),c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold',display:'block'},i._("Now It's Easier to Tag Photos.")),i._("Click photos with a {tagging_badge_icon} to review tag suggestions or add, edit, and remove tags. When you post the photo, your tags will be applied.",[i.param('tagging_badge_icon',c('React').createElement(c('Image.react'),{className:"_2z-r",src:j("95679")}))]))));},_getStickersNux:function m(){return c('React').createElement(c('XUIAmbientNUX.react'),{alignment:'right',contextRef:function(){return this.refs.root;}.bind(this),onCloseButtonClick:this.props.onStickersNUXClose,position:'below',shown:this.props.showStickersNUX},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement(c('Image.react'),{src:j("95645")}),c('React').createElement('div',{className:"_21ft"},c('React').createElement('div',{className:"_21fs"},i._("New! Add Stickers!")),i._("You can now add stickers to your photos"))));}});f.exports=l;}),null);
__d('ReactComposerNUXActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){f.exports=c('keyMirrorRecursive')({NUX_WAS_SHOWN:null,NUX_WAS_SEEN:null},'ReactComposerNUXActionType');}),null);
__d('ReactComposerNUXStore',['AsyncRequest','CommerceSelfServeNUXType','Map','ReactComposerNUXActionType','ReactComposerStoreBase'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('ReactComposerStoreBase'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {nuxes:new (c('Map'))()};},function(l){switch(l.type){case c('ReactComposerNUXActionType').NUX_WAS_SHOWN:k&&k.$ReactComposerNUXStore1(l);break;case c('ReactComposerNUXActionType').NUX_WAS_SEEN:k&&k.$ReactComposerNUXStore2(l);break;}});k=this;}j.prototype.hasNUXBeenSeen=function(k,l){'use strict';return this.$ReactComposerNUXStore3(k,l).seen;};j.prototype.getNUXShownPhotoID=function(k,l){'use strict';return this.$ReactComposerNUXStore3(k,l).photoID;};j.prototype.$ReactComposerNUXStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','nuxType','photoID']),m=l[0],n=l[1],o=l[2],p=this.$ReactComposerNUXStore3(m,n);p.photoID=o;this.emitChange(m);};j.prototype.$ReactComposerNUXStore2=function(k){'use strict';var l=this.validateAction(k,['composerID','nuxType']),m=l[0],n=l[1],o=this.$ReactComposerNUXStore3(m,n);o.seen=true;if(n!==c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON)new (c('AsyncRequest'))('/ajax/photos/composer/mark_nux_seen.php').setData({type:n}).send();this.emitChange(m);};j.prototype.$ReactComposerNUXStore3=function(k,l){'use strict';var m=this.getComposerData(k),n=m.nuxes.get(l);if(!n){n={seen:false,photoID:null};m.nuxes.set(l,n);}return n;};f.exports=new j();}),null);
__d('ReactComposerNUXActions',['ReactComposerDispatcher','ReactComposerNUXActionType','ReactComposerNUXStore'],(function a(b,c,d,e,f,g){c('ReactComposerNUXStore');var h={nuxWasShown:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerNUXActionType').NUX_WAS_SHOWN,nuxType:k,photoID:l});},nuxWasSeen:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerNUXActionType').NUX_WAS_SEEN,nuxType:k});}};f.exports=h;}),null);
__d('ReactComposerPhotoContainer.react',['cx','BootloadedComponent.react','CommerceSelfServeNUXType','ComposerNUXType','JSResource','LoadingIndicator.react','React','ReactComponentWithPureRenderMixin','ReactComposerContextMixin','ReactComposerMediaUploadActions','ReactComposerNUXActions','ReactComposerNUXStore','ReactComposerPhoto.react','ReactComposerPhotoActions','ReactComposerPhotoStore','ReactComposerPropsAndStoreBasedStateMixin','ReactDOM'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('ReactComposerContextMixin').contextTypes,j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactComposerPhotoContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerNUXStore'),c('ReactComposerPhotoStore'))],propTypes:{dragHandler:j.shape({add:j.func.isRequired,remove:j.func.isRequired}),enableFaceboxTagger:j.bool,isSpherical:j.bool,productTaggerType:j.string,disablePhotoEditing:j.bool,nuxConfig:j.object.isRequired,photoID:j.string,sphericalPhotoID:j.string,showProductTaggerNux:j.bool,uploadID:j.string.isRequired,fileURL:j.string,useLocalSphericalImage:j.bool,sphericalImage:j.object},statics:{beforeCalculateInitialState:function l(m,n){if(n.photoID){var o=c('ReactComposerPhotoStore').getPhoto(m,n.photoID);if(o){var p=this._shouldShowStickersNUX(m,o,n.nuxConfig),q=!p&&this._shouldShowTaggingNUX(m,o,n.nuxConfig);if(p)c('ReactComposerNUXActions').nuxWasShown(m,c('ComposerNUXType').ADD_STICKERS_NUX,o.id);if(q)c('ReactComposerNUXActions').nuxWasShown(m,c('ComposerNUXType').TAGGING_FLYOUT_NUX,o.id);}}},calculateState:function l(m,n){if(n.photoID){var o=c('ReactComposerPhotoStore').getPhoto(m,n.photoID);if(o){var p=this._shouldShowStickersNUX(m,o,n.nuxConfig),q=!p&&this._shouldShowTaggingNUX(m,o,n.nuxConfig),r=c('ReactComposerPhotoStore').getPhotoBeingTagged(m)===n.photoID,s=n.showProductTaggerNux===true&&this._shouldShowProductPhotoTaggingNUX(m);return {faceboxes:o.faceboxes,isLoadingPhotoEdit:o.isLoadingPhotoEdit,isRecognizingFaceboxes:o.isRecognizingFaceboxes,isSpherical:Boolean(o.cubestripURI),showPhotoTagger:r,showProductTaggerNux:s,showStickersNUX:p,showTaggingNUX:q,thumbSrc:o.thumbSrc};}}return {faceboxes:{},isLoadingPhotoEdit:false,isRecognizingFaceboxes:false,isSpherical:n.isSpherical,showPhotoTagger:false,showProductTaggerNux:n.showProductTaggerNux,showStickersNUX:false,showTaggingNUX:false,thumbSrc:''};},_couldShowNUX:function l(m,n,o,p){var q=c('ReactComposerNUXStore').getNUXShownPhotoID(m,p),r=c('ReactComposerNUXStore').hasNUXBeenSeen(m,p);return !!o[p]&&!r&&(!q||q===n.id);},_shouldShowStickersNUX:function l(m,n,o){return this._couldShowNUX(m,n,o,c('ComposerNUXType').ADD_STICKERS_NUX);},_shouldShowTaggingNUX:function l(m,n,o){return this._couldShowNUX(m,n,o,c('ComposerNUXType').TAGGING_FLYOUT_NUX)&&n.faceboxes.size>0;},_shouldShowProductPhotoTaggingNUX:function l(m){return !c('ReactComposerNUXStore').hasNUXBeenSeen(m,c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON);}},componentDidMount:function l(){setTimeout(function(){var m=this.props.dragHandler;m&&m.add(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},componentWillUnmount:function l(){setTimeout(function(){var m=this.props.dragHandler;m&&m.remove(c('ReactDOM').findDOMNode(this.refs.container));}.bind(this),0);},render:function l(){if(this.state.isSpherical||this.props.sphericalPhotoID){var m=c('React').createElement('div',{className:"_30t9"},c('React').createElement(c('LoadingIndicator.react'),{className:"_4qlq",size:'small',color:'white'}));return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ReactComposerSphericalPhoto.react').__setRef('ReactComposerPhotoContainer.react'),bootloadPlaceholder:m,className:"_4j47 _jfc",showEditButton:true,fileURL:this.props.fileURL,onRemoveButtonClicked:this._onRemoveButtonClicked,photoID:this.props.photoID,sphericalPhotoID:this.props.sphericalPhotoID,thumbSrc:this.state.thumbSrc,uploadID:this.props.uploadID,sphericalImage:this.props.sphericalImage,useLocalSphericalImage:this.props.useLocalSphericalImage,ref:'container'});}else return c('React').createElement(c('ReactComposerPhoto.react'),babelHelpers['extends']({},this.props,this.state,{onEditClick:this._onEditClick,onHideProductTaggerNux:this._onHideProductTaggerNux,onRemoveButtonClicked:this._onRemoveButtonClicked,onStickersNUXClose:this._onStickersNUXClose,onTagAdded:this._onTagAdded,onTagIntent:this._onTagIntent,onTaggingNUXClose:this._onTaggingNUXClose,onTagRemoved:this._onTagRemoved,ref:'container'}));},_onEditClick:function l(){this._onStickersNUXClose();},_onRemoveButtonClicked:function l(){if(this.props.photoID){c('ReactComposerPhotoActions').removePhoto(this.context.composerID,this.props.photoID,this.props.uploadID);}else c('ReactComposerMediaUploadActions').removeMediaUpload(this.context.composerID,this.props.uploadID);},_onStickersNUXClose:function l(){c('ReactComposerNUXActions').nuxWasSeen(this.context.composerID,c('ComposerNUXType').ADD_STICKERS_NUX);},_onTagAdded:function l(m,n,o){if(!(this.state.isSpherical||this.props.sphericalPhotoID)&&this.props.photoID)c('ReactComposerPhotoActions').tagFacebox(this.context.composerID,this.props.photoID,m,n,o);},_onTaggingNUXClose:function l(){c('ReactComposerNUXActions').nuxWasSeen(this.context.composerID,c('ComposerNUXType').TAGGING_FLYOUT_NUX);},_onTagIntent:function l(){if(this.state.showTaggingNUX)this._onTaggingNUXClose();},_onTagRemoved:function l(m,n){if(!(this.state.isSpherical||this.props.sphericalPhotoID)&&this.props.photoID)c('ReactComposerPhotoActions').untagFacebox(this.context.composerID,this.props.photoID,m,n);},_onHideProductTaggerNux:function l(){c('ReactComposerNUXActions').nuxWasSeen(this.context.composerID,c('CommerceSelfServeNUXType').COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON);}});k.contextTypes=i;f.exports=k;}),null);
__d('ImplicitLink.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement('span',{'data-offset-key':this.props.offsetKey,className:"_2ou",spellCheck:false},this.props.children);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('getRichTextInputDecorator',['CompositeDraftDecorator','EmojiSpan.react','EmoticonSpan.react','HashtagSpan.react','ImplicitLink.react','MentionSpan.react','RichTextEditorLink.react','WeakMentionSpan.react','getEntityMatcher','getHashtagMatches','getImplicitURLMatches'],(function a(b,c,d,e,f,g){var h;function i(){if(!h)h=new (c('CompositeDraftDecorator'))([{strategy:c('getEntityMatcher')(function(j){var k=j.getData();return j.getType()==='MENTION'&&k&&k.isWeak;}),component:c('WeakMentionSpan.react')},{strategy:c('getEntityMatcher')(function(j){return j.getType()==='MENTION';}),component:c('MentionSpan.react')},{strategy:c('getEntityMatcher')(function(j){return j.getType()==='EMOTICON';}),component:c('EmoticonSpan.react')},{strategy:c('getHashtagMatches'),component:c('HashtagSpan.react')},{strategy:c('getEntityMatcher')(function(j){return j.getType()==='EMOJI';}),component:c('EmojiSpan.react')},{strategy:c('getEntityMatcher')(function(j){return j.getType()==='LINK';}),component:c('RichTextEditorLink.react')},{strategy:c('getImplicitURLMatches'),component:c('ImplicitLink.react')}]);return h;}f.exports=i;}),null);
__d('ReactComposerStickerComponent.react',['ix','cx','fbt','Arbiter','Image.react','React','ReactComposerEvents','ReactComposerLoggingName','ReactComposerPrefillStore','ReactComposerTaggerActions','ReactComposerTaggerType','ShimButton.react','Sticker.react','StickerAssetType','StickerConstants','StickerUtils','XStickerAssetController','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$ReactComposerStickerComponent3=function(){c('ReactComposerTaggerActions').setTaggerData(this.props.composerID,c('ReactComposerLoggingName').STICKER_SPROUT,c('ReactComposerTaggerType').STICKER,null);}.bind(this),this.$ReactComposerStickerComponent4=function(){var s=c('ReactComposerPrefillStore').getAndEraseNestedField(this.props.composerID,['taggersData',c('ReactComposerTaggerType').STICKER]);if(s)c('ReactComposerTaggerActions').setTaggerDataWithoutLogging(this.props.composerID,c('ReactComposerTaggerType').STICKER,s);}.bind(this),o;}m.prototype.render=function(){'use strict';if(!(this.props.sticker&&this.props.sticker.stickerID))return null;var n=c('StickerUtils').getScaledDimensions(c('StickerConstants').TRAY_SIZE,c('StickerConstants').TRAY_SIZE,c('StickerConstants').TRAY_SIZE),o=n.height,p=n.width,q=c('XStickerAssetController').getURIBuilder().setInt('sticker_id',this.props.sticker.stickerID),r=c('React').createElement(c('Sticker.react'),{accessibilityLabel:this.props.sticker.accessibilityLabel,animationTrigger:'load_and_hover',frameCount:1,frameRate:c('StickerConstants').DEFAULT_FRAME_RATE,framesPerCol:1,framesPerRow:1,sourceHeight:o,sourceURI:q.setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString(),sourceWidth:p,stickerID:this.props.sticker.stickerID.toString(),className:"_x85"});return c('React').createElement('div',{className:"_x88"},c('React').createElement('span',{className:"_x8a"},r,this.$ReactComposerStickerComponent2()));};m.prototype.$ReactComposerStickerComponent2=function(){'use strict';return c('React').createElement(c('ShimButton.react'),{className:"_x8b",onClick:this.$ReactComposerStickerComponent3},c('React').createElement(c('Image.react'),{alt:j._("Remove sticker"),src:h("125920")}));};m.prototype.componentWillMount=function(){'use strict';this.$ReactComposerStickerComponent4();this.$ReactComposerStickerComponent1=c('Arbiter').subscribe(c('ReactComposerEvents').SET_PREFILL_DATA+this.context.composerID,this.$ReactComposerStickerComponent4);};m.prototype.componentWillUnmount=function(){'use strict';this.$ReactComposerStickerComponent1&&this.$ReactComposerStickerComponent1.unsubscribe();this.$ReactComposerStickerComponent1=null;};f.exports=m;}),null);
__d('CollectionThumbnail.react',['cssVar','cx','fbt','BackgroundImage.react','React','isKeyActivation'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').PureComponent);l=k&&k.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.$CollectionThumbnail1=function(t){if(c('isKeyActivation')(t))this.props.onClick&&this.props.onClick(t);}.bind(this),p;}n.prototype.render=function(){return c('React').createElement('div',{className:"_2vw6",onClick:this.props.onClick,onKeyDown:this.$CollectionThumbnail1,tabIndex:0,role:'button'},c('React').createElement(c('BackgroundImage.react'),{backgroundSize:'cover',height:parseInt("140px",10),src:this.props.thumbnailURL,width:parseInt("140px",10)}),c('React').createElement('div',{className:"_3iom"},c('React').createElement('div',{className:"_3ion"},c('React').createElement(c('BackgroundImage.react'),{backgroundPosition:'100% 50%',className:"_1x7m",height:12,src:this.props.privacyIcon,width:12}),this.props.collectionName),c('React').createElement('div',{className:"_3ioo"},j._({"*":"{number of posts} posts","268435456":"1 post"},[j.plural(this.props.numPosts,'number of posts')]))));};n.propTypes={collectionID:m.oneOfType([m.string,m.number]).isRequired,collectionName:m.string.isRequired,numPosts:m.number.isRequired,onClick:m.func,thumbnailURL:m.string.isRequired,privacyIcon:m.string};f.exports=n;}),null);
__d("XCollectionCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/collection\/create\/",{});}),null);
__d("XCollectionCreationDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/collections\/creation_dialog\/",{composer_id:{type:"String"},privacy_row:{type:"String"},privacy_placeholder_id:{type:"String"},shared_album_privacy_placeholder_id:{type:"String"}});}),null);
__d('ReactComposerCollectionCreationDialog.react',['cx','fbt','ix','AsyncRequest','CurrentUser','DOM','DOMContainer.react','Image.react','immutable','PrivacyConst','PrivacySelector','ProfileFeaturedAlbumsToggle.react','ProfileSetsGatingConfig','React','SharedAlbumContributorsTokenizer.react','SimpleXUIDialog','TextAreaWithLineLimit.react','XCollectionCreateController','XCollectionCreationDialogController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISpinner.react','XUITextInput.react','$'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').PureComponent);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.$ReactComposerCollectionCreationDialog18=function(){this.setState({creatingAlbum:true});var o=c('XCollectionCreateController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(o).setMethod('POST').setData({title:this.$ReactComposerCollectionCreationDialog15(),contributors:this.state.contributors.map(function(p){return p.id;}).toArray(),description:this.$ReactComposerCollectionCreationDialog16(),privacyx:this.$ReactComposerCollectionCreationDialog17(),should_feature:this.state.feature}).setHandler(function(p){this.setState({creatingAlbum:false});this.props.onAlbumCreated(p.payload.collectionThumbnailData);}.bind(this)).setErrorHandler(this.$ReactComposerCollectionCreationDialog19).send();}.bind(this);this.$ReactComposerCollectionCreationDialog19=function(o){this.setState({creatingAlbum:false});c('SimpleXUIDialog').show(i._("Your album could not be created right now. Please try again later."),i._("Sorry, an error has occurred..."));}.bind(this);this.$ReactComposerCollectionCreationDialog22=function(o){var p=this.state.contributors,q=p.add(o);this.setState({contributors:q});}.bind(this);this.$ReactComposerCollectionCreationDialog23=function(o){var p=this.state.contributors,q=p['delete'](o);this.setState({contributors:q});}.bind(this);this.$ReactComposerCollectionCreationDialog27=function(o){var p=this.$ReactComposerCollectionCreationDialog12();if(!p)return;this.setState({feature:o});if(o){p.selectOption(c('PrivacyConst').PostParam.EVERYONE.toString());p.disable();}else p.enable();}.bind(this);this.state={albumTitle:null,albumTitleHasBlurred:false,albumDescription:null,albumOwnerID:'',contributors:c('immutable').OrderedSet(),contributorSource:null,creatingAlbum:false,feature:false,privacySelectorLoaded:false};}m.prototype.componentWillMount=function(){m.$ReactComposerCollectionCreationDialog8[this.props.composerID]=this;this.$ReactComposerCollectionCreationDialog4=document.createElement('div');this.$ReactComposerCollectionCreationDialog4.setAttribute('id',this.$ReactComposerCollectionCreationDialog9());this.$ReactComposerCollectionCreationDialog5=document.createElement('div');this.$ReactComposerCollectionCreationDialog5.setAttribute('id',this.$ReactComposerCollectionCreationDialog10());};m.prototype.componentDidMount=function(){this.$ReactComposerCollectionCreationDialog3.layer.subscribe('hide',this.props.onCancel);var n=c('XCollectionCreationDialogController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(n).setMethod('GET').setReadOnly(true).setData({composer_id:this.props.composerID,privacy_placeholder_id:this.$ReactComposerCollectionCreationDialog9(),shared_album_privacy_placeholder_id:this.$ReactComposerCollectionCreationDialog10()}).setHandler(function(){return this.setState({privacySelectorLoaded:true});}.bind(this)).send();};m.prototype.componentDidUpdate=function(n,o){if(this.state.privacySelectorLoaded&&!o.privacySelectorLoaded)this.$ReactComposerCollectionCreationDialog2&&this.$ReactComposerCollectionCreationDialog2.focusInput();};m.prototype.componentWillUnmout=function(){m.$ReactComposerCollectionCreationDialog8[this.props.composerID]=null;};m.prototype.componentWillUpdate=function(n,o){if(this.state.contributors.isEmpty()&&!o.contributors.isEmpty()){this.$ReactComposerCollectionCreationDialog11(this.$ReactComposerCollectionCreationDialog12(),this.$ReactComposerCollectionCreationDialog13());}else if(!this.state.contributors.isEmpty()&&o.contributors.isEmpty())this.$ReactComposerCollectionCreationDialog11(this.$ReactComposerCollectionCreationDialog13(),this.$ReactComposerCollectionCreationDialog12());};m.prototype.$ReactComposerCollectionCreationDialog12=function(){if(this.$ReactComposerCollectionCreationDialog6){return this.$ReactComposerCollectionCreationDialog6;}else{this.$ReactComposerCollectionCreationDialog6=c('PrivacySelector').getAdamaSelectorInstance(c('$')(this.$ReactComposerCollectionCreationDialog9()));return this.$ReactComposerCollectionCreationDialog6;}};m.prototype.$ReactComposerCollectionCreationDialog13=function(){if(this.$ReactComposerCollectionCreationDialog7){return this.$ReactComposerCollectionCreationDialog7;}else{this.$ReactComposerCollectionCreationDialog7=c('PrivacySelector').getAdamaSelectorInstance(c('$')(this.$ReactComposerCollectionCreationDialog10()));return this.$ReactComposerCollectionCreationDialog7;}};m.prototype.$ReactComposerCollectionCreationDialog11=function(n,o){if(!(n&&o))return;o.selectOption(n.getPostParam());};m.prototype.$ReactComposerCollectionCreationDialog9=function(){var n=this.props.composerID+'.cph';return n.replace(/\./g,'-');};m.prototype.$ReactComposerCollectionCreationDialog10=function(){return this.$ReactComposerCollectionCreationDialog9()+'s';};m.prototype.$ReactComposerCollectionCreationDialog14=function(){var n=this.$ReactComposerCollectionCreationDialog15();if(!n||!n.match(/\S+/)){return i._("Enter an album name").toString();}else return null;};m.prototype.$ReactComposerCollectionCreationDialog15=function(){return this.state.albumTitle;};m.prototype.$ReactComposerCollectionCreationDialog16=function(){return this.state.albumDescription;};m.prototype.$ReactComposerCollectionCreationDialog17=function(){var n=this.state.contributors.isEmpty()?this.$ReactComposerCollectionCreationDialog12():this.$ReactComposerCollectionCreationDialog13();if(n){return n.getPostParam();}else{var o=this.state.contributors.isEmpty()?c('$')(this.$ReactComposerCollectionCreationDialog9()):c('$')(this.$ReactComposerCollectionCreationDialog10()),p=c('DOM').scry(o,'select option[selected="1"]').pop();return p&&p.value;}};m.prototype.$ReactComposerCollectionCreationDialog20=function(){var n=c('React').createElement(c('Image.react'),{className:"_5-hz",src:j("85428")}),o=c('React').createElement('span',{className:"_5-h-"},i._("Create"));return c('React').createElement(c('XUIDialogButton.react'),{action:'confirm',className:"_5-h_"+(this.state.creatingAlbum?' '+"_5-i0":''),disabled:this.state.creatingAlbum||!this.state.privacySelectorLoaded||this.$ReactComposerCollectionCreationDialog14()!==null,image:n,label:o,onClick:this.$ReactComposerCollectionCreationDialog18,use:'confirm'});};m.prototype.$ReactComposerCollectionCreationDialog21=function(){return c('React').createElement(c('XUIDialogBody.react'),{className:"_5-i1 _5-i2"},c('React').createElement(c('XUISpinner.react'),{size:'large'}));};m.prototype.$ReactComposerCollectionCreationDialog24=function(){if(this.state.contributorSource==null){return c('React').createElement(c('XUISpinner.react'),{size:'small'});}else return c('React').createElement(c('SharedAlbumContributorsTokenizer.react'),{className:"_5-i3",dataSource:this.state.contributorSource,disabled:this.state.feature,entries:this.state.contributors.toArray(),focusedOnInit:false,ownerID:this.state.albumOwnerID,onContributorAdded:this.$ReactComposerCollectionCreationDialog22,onContributorRemoved:this.$ReactComposerCollectionCreationDialog23,placeholder:c('CurrentUser').isWorkUser()?i._("Enter coworkers' names"):i._("Enter friends' names")});};m.prototype.$ReactComposerCollectionCreationDialog25=function(){return c('React').createElement('div',null,c('React').createElement('div',{className:!this.state.contributors.isEmpty()?"hidden_elem":''},c('React').createElement(c('DOMContainer.react'),null,this.$ReactComposerCollectionCreationDialog4)),c('React').createElement('div',{className:this.state.contributors.isEmpty()?"hidden_elem":''},c('React').createElement(c('DOMContainer.react'),null,this.$ReactComposerCollectionCreationDialog5)));};m.prototype.$ReactComposerCollectionCreationDialog26=function(){if(!c('ProfileSetsGatingConfig').can_see_featured_creation)return null;return c('React').createElement(c('ProfileFeaturedAlbumsToggle.react'),{checked:this.state.feature,disabled:!this.state.contributors.isEmpty(),onToggle:this.$ReactComposerCollectionCreationDialog27});};m.prototype.$ReactComposerCollectionCreationDialog28=function(){return c('React').createElement(c('XUIDialogBody.react'),{className:"_5-i1"},c('React').createElement('div',null,c('React').createElement(c('XUITextInput.react'),{onBlur:function(n){this.setState({albumTitleHasBlurred:true});}.bind(this),onChange:function(n){return this.setState({albumTitle:n.target.value});}.bind(this),placeholder:i._("Album name"),ref:function(n){return this.$ReactComposerCollectionCreationDialog2=n;}.bind(this),required:true,value:this.state.albumTitle,xuiError:this.state.albumTitleHasBlurred&&this.$ReactComposerCollectionCreationDialog14()})),c('React').createElement('div',null,c('React').createElement(c('TextAreaWithLineLimit.react'),{onChange:function(n){return this.setState({albumDescription:n});}.bind(this),placeholder:i._("Add a description"),ref:function(n){return this.$ReactComposerCollectionCreationDialog1=n;}.bind(this),value:this.state.albumDescription})),c('React').createElement('div',{className:"_5-i4"},c('React').createElement('label',null,i._("Add contributors"),this.$ReactComposerCollectionCreationDialog24())),this.$ReactComposerCollectionCreationDialog26(),c('React').createElement('div',{className:"_5-i4"},c('React').createElement('label',null,i._("Privacy"),this.$ReactComposerCollectionCreationDialog25())));};m.initContributorsField=function(n,o,p){var q=m.$ReactComposerCollectionCreationDialog8[n];q.setState({albumOwnerID:p,contributorSource:o});};m.prototype.render=function(){return c('React').createElement(c('XUIDialog.react'),babelHelpers['extends']({className:"_5-i5",ref:function(n){return this.$ReactComposerCollectionCreationDialog3=n;}.bind(this)},this.props.dialogProps),c('React').createElement(c('XUIDialogTitle.react'),null,i._("Create Album")),this.state.privacySelectorLoaded?this.$ReactComposerCollectionCreationDialog28():this.$ReactComposerCollectionCreationDialog21(),c('React').createElement(c('XUIDialogFooter.react'),{className:"_5-i6"},c('React').createElement(c('XUIDialogCancelButton.react'),null),this.$ReactComposerCollectionCreationDialog20()));};m.$ReactComposerCollectionCreationDialog8={};f.exports=m;}),null);
__d('ReactComposerCollectionsActions',['ReactComposerCollectionsActionTypes','ReactComposerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h={showCollectionsSelector:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,sourceLoggingName:k,type:c('ReactComposerCollectionsActionTypes').SHOW_COLLECTION_SELECTOR});},hideCollectionsSelector:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,sourceLoggingName:k,type:c('ReactComposerCollectionsActionTypes').HIDE_COLLECTION_SELECTOR});},hideCollectionsSelectorWithoutLogging:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,suppressWaterfallLogging:true,type:c('ReactComposerCollectionsActionTypes').HIDE_COLLECTION_SELECTOR});},showCreationLayer:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,sourceLoggingName:k,type:c('ReactComposerCollectionsActionTypes').SHOW_CREATION_LAYER});},hideCreationLayer:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?false:arguments[2];c('ReactComposerDispatcher').dispatch({composerID:j,isCancel:l,sourceLoggingName:k,type:c('ReactComposerCollectionsActionTypes').HIDE_CREATION_LAYER});}};f.exports=h;}),null);
__d("XReactComposerCollectionSelectorController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/react_composer\/collections\/selector\/",{});}),null);
__d('ReactComposerCollectionsStore',['AsyncRequest','LoadObject','ReactComposerActionStore','ReactComposerCollectionsActionTypes','XReactComposerCollectionSelectorController'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ReactComposerActionStore'));i=h&&h.prototype;function j(){var k;i.constructor.call(this,function(){return {collectionsLoadObject:null,isSelectorVisible:false};},function(l){switch(l.type){case c('ReactComposerCollectionsActionTypes').SHOW_COLLECTION_SELECTOR:k&&k.$ReactComposerCollectionsStore1(l);break;case c('ReactComposerCollectionsActionTypes').HIDE_COLLECTION_SELECTOR:k&&k.$ReactComposerCollectionsStore2(l);break;case c('ReactComposerCollectionsActionTypes').SHOW_CREATION_LAYER:k&&k.$ReactComposerCollectionsStore3(l);break;case c('ReactComposerCollectionsActionTypes').HIDE_CREATION_LAYER:k&&k.$ReactComposerCollectionsStore4(l);break;}});k=this;}j.prototype.loadCollections=function(k){var l=this.getComposerData(k);l.collectionsLoadObject=c('LoadObject').loading();var m=c('XReactComposerCollectionSelectorController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(m).setMethod('GET').setReadOnly(true).setHandler(function(n){var o=this.getComposerData(k);o.collectionsLoadObject=o.collectionsLoadObject.setValue(n.payload).done();this.emitChange(k);}.bind(this)).send();};j.prototype.addNewCollection=function(k,l){var m=this.getCollections(k);if(!m||!m.isDone())return;var n=m.getValue();if(n==null)return;n.unshift(l);this.emitChange(k);};j.prototype.getCollections=function(k){var l=this.getComposerData(k);return l.collectionsLoadObject;};j.prototype.getCollectionByID=function(k,l){var m=this.getComposerData(k),n=m.collectionsLoadObject;if(!n||!n.isDone())return null;return n.getValue().find(function(o){return o.id===l;});};j.prototype.isSelectorVisible=function(k){var l=this.getComposerData(k);return l.isSelectorVisible;};j.prototype.$ReactComposerCollectionsStore1=function(k){var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);if(!m.collectionsLoadObject)this.loadCollections(l);m.isSelectorVisible=true;this.emitChange(l);};j.prototype.$ReactComposerCollectionsStore2=function(k){var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);m.isSelectorVisible=false;this.emitChange(l);};j.prototype.isCreationLayerVisible=function(k){var l=this.getComposerData(k);return l.isCreationLayerVisible;};j.prototype.$ReactComposerCollectionsStore3=function(k){var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);m.isCreationLayerVisible=true;this.emitChange(l);};j.prototype.$ReactComposerCollectionsStore4=function(k){var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);m.isCreationLayerVisible=false;this.emitChange(l);};f.exports=new j();}),null);
__d('ReactComposerCollectionSelector.react',['ix','cssVar','cx','fbt','AccessibleLayer','CollectionThumbnail.react','ContextualLayer.react','ContextualLayerAutoFlip','Grid.react','ReactComposerAudienceActions','ReactComposerCollectionCreationDialog.react','ReactComposerCollectionsActions','ReactComposerCollectionsStore','ReactComposerLoggingActions','ReactComposerLoggingName','InlineBlock.react','Image.react','LayerAutoFocus','LayerHideOnEscape','LayerFadeOnHide','LayerFadeOnShow','LayerHideOnBlur','LayerTabIsolation','Link.react','ShimButton.react','XUIAmbientNUX.react','XUIButton.react','XUICard.react','XUICardHeader.react','XUICardHeaderTitle.react','XUICardSection.react','XUIPopoverButton.react','XUISpinner.react','ReactComposerContextMixin','React','ReactDOM','fbglyph','ifRequired','isKeyActivation'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('Grid.react').GridItem,o=c('ReactComposerContextMixin').contextTypes;l=babelHelpers.inherits(p,c('React').PureComponent);m=l&&l.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=m.constructor).call.apply(q,[this].concat(t)),this.$ReactComposerCollectionSelector1=null,this.$ReactComposerCollectionSelector2=function(){if(!this.props.selectorVisible)c('ReactComposerCollectionsActions').showCollectionsSelector(this.context.composerID,c('ReactComposerLoggingName').COLLECTIONS_SELECTOR_BUTTON);}.bind(this),this.$ReactComposerCollectionSelector3=function(v){if(c('isKeyActivation')(v))this.$ReactComposerCollectionSelector4(v.nativeEvent);}.bind(this),this.$ReactComposerCollectionSelector4=function(v){c('ReactComposerAudienceActions').setCollectionID(this.context.composerID,c('ReactComposerLoggingName').COLLECTION_CLEAR_BUTTON,null);v.stopPropagation();}.bind(this),this.$ReactComposerCollectionSelector5=function(v){var w=arguments.length<=1||arguments[1]===undefined?c('ReactComposerLoggingName').OTHERS:arguments[1];if(!v&&this.props.selectorVisible)c('ReactComposerCollectionsActions').hideCollectionsSelector(this.context.composerID,w);}.bind(this),this.$ReactComposerCollectionSelector6=function(){c('ReactComposerCollectionsActions').hideCollectionsSelectorWithoutLogging(this.context.composerID);c('ReactComposerCollectionsActions').showCreationLayer(this.context.composerID,c('ReactComposerLoggingName').COLLECTIONS_SELECTOR_CREATE_BUTTON);}.bind(this),this.$ReactComposerCollectionSelector7=function(){c('ReactComposerCollectionsActions').hideCreationLayer(this.context.composerID,c('ReactComposerLoggingName').COLLECTIONS_CREATE_CANCEL_BUTTON,true);c('ReactComposerLoggingActions').collectionSelectorCancel(this.context.composerID,c('ReactComposerLoggingName').COLLECTIONS_CREATE_CANCEL_BUTTON);}.bind(this),this.$ReactComposerCollectionSelector8=function(v){c('ReactComposerCollectionsStore').addNewCollection(this.context.composerID,v);c('ReactComposerCollectionsActions').hideCreationLayer(this.context.composerID,c('ReactComposerLoggingName').COLLECTIONS_CREATE_SUBMIT_BUTTON);c('ReactComposerLoggingActions').collectionSelectorDone(this.context.composerID,c('ReactComposerLoggingName').COLLECTIONS_CREATE_SUBMIT_BUTTON);this.$ReactComposerCollectionSelector9(v);}.bind(this),r;}p.prototype.componentDidUpdate=function(q,r){if(this.props.selectorVisible&&!q.selectorVisible)if(this.props.selectedCollectionID){var s=c('ReactDOM').findDOMNode(this.refs[this.props.selectedCollectionID]);if(s!==null&&this.$ReactComposerCollectionSelector1!==null){var t=c('ReactDOM').findDOMNode(this.$ReactComposerCollectionSelector1);if(t!==null)t.scrollTop=s.offsetTop;}}};p.prototype.$ReactComposerCollectionSelector9=function(q){if(q.id==this.props.selectedCollectionID){c('ReactComposerAudienceActions').setCollectionID(this.context.composerID,c('ReactComposerLoggingName').COLLECTION_SELECTED,null);}else{c('ReactComposerAudienceActions').setCollectionID(this.context.composerID,c('ReactComposerLoggingName').COLLECTION_SELECTED,q.id);this.$ReactComposerCollectionSelector5(false,c('ReactComposerLoggingName').COLLECTION_SELECTED);}c('ifRequired')('ReactComposerPostToGroupActions',function(r){return r.unselectTab(this.context.composerID);}.bind(this));};p.prototype.$ReactComposerCollectionSelector10=function(q){if(q==null)return null;var r=c('ReactComposerCollectionsStore').getCollectionByID(this.context.composerID,q);if(r)return r.name;return null;};p.prototype.$ReactComposerCollectionSelector11=function(q){if(q){var r=this.$ReactComposerCollectionSelector10(q);if(r)return r;}return k._("+ Album").toString();};p.prototype.$ReactComposerCollectionSelector12=function(){return c('React').createElement(c('ShimButton.react'),{className:"_2vw6 _1d5q",key:'addAlbumButton',onClick:this.$ReactComposerCollectionSelector6},c('React').createElement('div',{className:"_1d5r"},c('React').createElement('div',{className:"_1d5s"}),k._("Create Album")));};p.prototype.$ReactComposerCollectionSelector13=function(){return c('React').createElement('div',{className:"_1d5t"},c('React').createElement('span',{className:"_1d5u"}),c('React').createElement('div',{className:"_1d5v"},k._("No albums to show")),c('React').createElement(c('XUIButton.react'),{label:k._("Create Album"),use:'confirm',onClick:this.$ReactComposerCollectionSelector6}));};p.prototype.$ReactComposerCollectionSelector14=function(){var q=this.props.collections&&this.props.collections.getValue();if(q&&q.length===0){return this.$ReactComposerCollectionSelector13();}else{var r=[this.$ReactComposerCollectionSelector12()];if(q)r.push(q.map(function(s){return c('React').createElement(n,{ref:s.id,key:s.id,className:s.id===this.props.selectedCollectionID?"_5zfq":''},c('React').createElement(c('CollectionThumbnail.react'),{collectionID:s.id,collectionName:s.name,numPosts:s.numPosts,onClick:function(){return this.$ReactComposerCollectionSelector9(s);}.bind(this),thumbnailURL:s.thumbnailURL,privacyIcon:s.privacyIcon}));}.bind(this)));return c('React').createElement(c('Grid.react'),{className:"_1d5w",cols:2,fixed:false},r);}};p.prototype.$ReactComposerCollectionSelector15=function(){if(!this.props.collections){return null;}else return c('React').createElement(c('ContextualLayer.react'),{behaviors:{AccessibleLayer:c('AccessibleLayer'),ContextualLayerAutoFlip:c('ContextualLayerAutoFlip'),LayerAutoFocus:c('LayerAutoFocus'),LayerHideOnBlur:c('LayerHideOnBlur'),LayerHideOnEscape:c('LayerHideOnEscape'),LayerFadeOnShow:c('LayerFadeOnShow'),LayerFadeOnHide:c('LayerFadeOnHide'),LayerTabIsolation:c('LayerTabIsolation')},contextRef:function(){return this.refs.collectionSelectorTrigger;}.bind(this),onToggle:this.$ReactComposerCollectionSelector5,position:'below',shown:this.props.selectorVisible},c('React').createElement(c('XUICard.react'),{className:"_5ze9"},c('React').createElement(c('XUICardHeader.react'),{className:"_5zea",type:'primary'},c('React').createElement(c('XUICardHeaderTitle.react'),null,k._("Albums"))),c('React').createElement(c('XUICardSection.react'),{ref:function(q){return this.$ReactComposerCollectionSelector1=q;}.bind(this),className:"_5zeh autofocus"},!this.props.collections||this.props.collections.isLoading()?c('React').createElement('div',{className:"_2n10"},c('React').createElement(c('XUISpinner.react'),{size:'large'})):this.$ReactComposerCollectionSelector14())));};p.prototype.$ReactComposerCollectionSelector16=function(){if(this.props.creationLayerVisible){return c('React').createElement(c('ReactComposerCollectionCreationDialog.react'),{composerID:this.context.composerID,dialogProps:{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerFadeOnShow:c('LayerFadeOnShow')},causalElementRef:function(){return this.refs.collectionSelectorTrigger;}.bind(this),shown:this.props.creationLayerVisible,width:parseInt("375px",10)},onCancel:this.$ReactComposerCollectionSelector7,onAlbumCreated:this.$ReactComposerCollectionSelector8});}else return null;};p.prototype.$ReactComposerCollectionSelector17=function(){return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:function(){return this.refs.collectionSelectorTrigger;}.bind(this),shown:this.props.showAnyPostTypeNux,onCloseButtonClick:this.props.onAnyPostTypeNuxClose,position:this.props.alternateTriggerComponent?'below':'above'},k._("Now you can add posts, check-ins and more to albums"));};p.prototype.render=function(){var q=!!this.$ReactComposerCollectionSelector10(this.props.selectedCollectionID);return c('React').createElement(c('InlineBlock.react'),{className:'uiContextualLayerParent'},this.props.alternateTriggerComponent?c('React').createElement(c('Link.react'),{role:'button',onClick:this.$ReactComposerCollectionSelector2,ref:'collectionSelectorTrigger'},this.props.alternateTriggerComponent):c('React').createElement(c('XUIPopoverButton.react'),{className:"_5ze8",label:this.$ReactComposerCollectionSelector11(this.props.selectedCollectionID),onClick:this.$ReactComposerCollectionSelector2,ref:'collectionSelectorTrigger',use:'confirm',chevron:q?c('React').createElement(c('Image.react'),{onClick:this.$ReactComposerCollectionSelector4,onKeyDown:this.$ReactComposerCollectionSelector3,role:'button',src:h("114707"),tabIndex:0}):null}),this.$ReactComposerCollectionSelector15(),this.$ReactComposerCollectionSelector16(),this.$ReactComposerCollectionSelector17());};p.defaultProps={collections:null,creationLayerVisible:false,selectedCollectionID:null,selectorVisible:false,showAnyPostTypeNux:false};p.contextTypes=o;f.exports=p;}),null);
__d('ReactComposerCollectionSelectorContainer.react',['React','ReactComponentWithPureRenderMixin','ReactComposerAudienceStore','ReactComposerCollectionSelector.react','ReactComposerCollectionsStore','ReactComposerPropsAndStoreBasedStateMixin','SimpleNUXMessage','SimpleNUXMessageTypes'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'ReactComposerCollectionSelectorContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerAudienceStore'),c('ReactComposerCollectionsStore'))],propTypes:{alternateTriggerComponent:h.element,addAnyPostToAlbum:h.bool},statics:{calculateState:function j(k,l){return {collections:c('ReactComposerCollectionsStore').getCollections(k),selectedCollectionID:c('ReactComposerAudienceStore').getCollectionID(k),isSelectorVisible:c('ReactComposerCollectionsStore').isSelectorVisible(k),isCreationLayerVisible:c('ReactComposerCollectionsStore').isCreationLayerVisible(k),showAnyPostTypeNux:l.addAnyPostToAlbum&&!c('SimpleNUXMessage').hasUserSeenMessage(c('SimpleNUXMessageTypes').ALBUMSV2_ANY_POST_TYPE_WWW)};}},_onAnyPostTypeNuxClose:function j(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').ALBUMSV2_ANY_POST_TYPE_WWW);this.setState({showAnyPostTypeNux:false});},render:function j(){return c('React').createElement(c('ReactComposerCollectionSelector.react'),{alternateTriggerComponent:this.props.alternateTriggerComponent,collections:this.state.collections,creationLayerVisible:this.state.isCreationLayerVisible,selectedCollectionID:this.state.selectedCollectionID,selectorVisible:this.state.isSelectorVisible,showAnyPostTypeNux:this.state.showAnyPostTypeNux,onAnyPostTypeNuxClose:this._onAnyPostTypeNuxClose});}});f.exports=i;}),null);
__d('ReactComposerSelectedCollectionIndicator.react',['ix','cx','Image.react','Link.react','React','ReactComposerAudienceActions','ReactComposerContextMixin','ReactComposerLoggingName','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('ReactComposerContextMixin').contextTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$ReactComposerSelectedCollectionIndicator1=function(s){c('ReactComposerAudienceActions').setCollectionID(this.context.composerID,c('ReactComposerLoggingName').COLLECTION_CLEAR_BUTTON,null);s.stopPropagation();}.bind(this),o;}m.prototype.render=function(){return this.props.selectedCollectionName?c('React').createElement('div',{className:"_2e8c"},c('React').createElement(c('Image.react'),{className:"_2e8d",src:h("124973")}),c('React').createElement('span',{className:"_2e8e"},this.props.selectedCollectionName),c('React').createElement(c('Link.react'),{onClick:this.$ReactComposerSelectedCollectionIndicator1},c('React').createElement(c('Image.react'),{className:"_2e8f",src:h("124318")}))):null;};m.contextTypes=l;f.exports=m;}),null);
__d('ReactComposerSelectedCollectionIndicatorContainer.react',['React','ReactComponentWithPureRenderMixin','ReactComposerAudienceStore','ReactComposerCollectionsStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerSelectedCollectionIndicator.react'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'ReactComposerSelectedCollectionIndicatorContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactComposerAudienceStore'))],statics:{calculateState:function i(j,k){var l=null,m=c('ReactComposerAudienceStore').getCollectionID(j);if(m){var n=c('ReactComposerCollectionsStore').getCollectionByID(j,m);l=n&&n.name;}return {selectedCollectionName:l};}},render:function i(){return c('React').createElement(c('ReactComposerSelectedCollectionIndicator.react'),{selectedCollectionName:this.state.selectedCollectionName});}});f.exports=h;}),null);
__d('getReactComposerEmojiInputDecorator',['EmojiInputDecorator','EmojiSpan.react','ReactComposerInputDecorator','getMentionsInputDecorator','getRichTextInputDecorator','memoizeWithArgs'],(function a(b,c,d,e,f,g){'use strict';var h=c('memoizeWithArgs')(function(i,j){var k=null;if(i===c('ReactComposerInputDecorator').RICH_TEXT){k=c('getRichTextInputDecorator')();}else if(i===c('ReactComposerInputDecorator').MENTIONS)k=c('getMentionsInputDecorator')();if(j)k=new (c('EmojiInputDecorator'))(c('EmojiSpan.react'),k,{size:j});return k;},function(i,j){if(!j)return '#'+i;return i+'_'+j;});f.exports=h;}),null);